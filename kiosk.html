<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COM í¬íŠ¸ ì§ì ‘ ì¶œë ¥ í‚¤ì˜¤ìŠ¤í¬</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        .container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            color: white;
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 15px;
            text-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .status-bar {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
        }
        .current-time {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .printer-status {
            font-size: 1.2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .printer-status.connected { color: #27ae60; }
        .printer-status.disconnected { color: #e74c3c; }
        .printer-status.connecting { color: #f39c12; }
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .service-title {
            text-align: center;
            color: white;
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 40px;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        .course-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            max-width: 1100px;
            margin: 0 auto;
        }
        .course-btn {
            background: rgba(255, 255, 255, 0.95);
            border: none;
            border-radius: 20px;
            padding: 45px 35px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        .course-btn:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        .course-btn:active {
            transform: translateY(-4px);
            background: rgba(46, 204, 113, 0.95);
        }
        .course-name {
            font-size: 2rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 15px;
        }
        .course-description {
            font-size: 1.3rem;
            color: #7f8c8d;
            line-height: 1.4;
        }
        .settings-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .settings-panel {
            position: fixed;
            top: 0;
            right: -600px;
            width: 600px;
            height: 100%;
            background: white;
            transition: right 0.3s ease;
            z-index: 2000;
            overflow-y: auto;
            box-shadow: -5px 0 20px rgba(0,0,0,0.2);
        }
        .settings-panel.open { right: 0; }
        .settings-header {
            background: #667eea;
            color: white;
            padding: 25px;
            font-size: 1.5rem;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .settings-content { 
            padding: 25px; 
            padding-bottom: 100px;
        }
        .setting-group { 
            margin-bottom: 30px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }
        .setting-label {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
            color: #2c3e50;
        }
        .setting-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 10px;
        }
        .setting-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin: 5px 5px 5px 0;
            transition: background 0.3s ease;
        }
        .setting-btn:hover {
            background: #5a6fd8;
        }
        .setting-btn.danger {
            background: #e74c3c;
        }
        .setting-btn.success {
            background: #27ae60;
        }
        .code-example {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin: 10px 0;
            white-space: pre-wrap;
            overflow-x: auto;
        }
        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            color: #856404;
        }
        .info-box {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            color: #0c5460;
        }
        .print-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(39, 174, 96, 0.95);
            color: white;
            padding: 40px 60px;
            border-radius: 25px;
            font-size: 2.5rem;
            font-weight: 700;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            z-index: 10000;
            text-align: center;
            backdrop-filter: blur(15px);
        }
        .com-controls {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 10px 0;
            flex-wrap: wrap;
        }
        .com-select {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            display: inline-block;
        }
        .status-indicator.connected { background: #27ae60; }
        .status-indicator.disconnected { background: #e74c3c; }
        .status-indicator.connecting { background: #f39c12; animation: pulse 1s infinite; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <div class="container">
        <button class="settings-toggle" onclick="toggleSettings()">âš™ï¸</button>
        
        <div class="header">
            <h1>ğŸ–¨ï¸ COM í¬íŠ¸ ì§ì ‘ ì¶œë ¥</h1>
            <p style="color: white; font-size: 1.3rem;">ì‹œë¦¬ì–¼ í”„ë¦°í„° ì—°ê²° ì‹œìŠ¤í…œ</p>
        </div>

        <div class="status-bar">
            <div class="current-time" id="currentTime"></div>
            <div class="printer-status disconnected" id="printerStatus">
                <span class="status-indicator disconnected"></span>
                í”„ë¦°í„° ë¯¸ì—°ê²°
            </div>
            <div id="currentPeriod" style="font-size: 1.1rem; color: #666;"></div>
        </div>

        <div class="main-content">
            <div class="service-title">ë²ˆí˜¸í‘œë¥¼ ë°œê¸‰ë°›ìœ¼ì„¸ìš”</div>
            
            <div class="course-buttons" id="courseButtons">
                <button class="course-btn" onclick="issueTicket('A', 'OA ê³¼ì • ìƒë‹´', 'ì›Œë“œ, ì—‘ì…€, íŒŒì›Œí¬ì¸íŠ¸')">
                    <div class="course-name">OA ê³¼ì • ìƒë‹´</div>
                    <div class="course-description">ì›Œë“œ, ì—‘ì…€, íŒŒì›Œí¬ì¸íŠ¸ ê¸°ì´ˆë¶€í„° ì‹¤ë¬´ê¹Œì§€</div>
                </button>
                <button class="course-btn" onclick="issueTicket('B', 'ë””ìì¸ ê³¼ì • ìƒë‹´', 'í¬í† ìƒµ, ì¼ëŸ¬ìŠ¤íŠ¸')">
                    <div class="course-name">ë””ìì¸ ê³¼ì • ìƒë‹´</div>
                    <div class="course-description">í¬í† ìƒµ, ì¼ëŸ¬ìŠ¤íŠ¸, ì›¹ë””ìì¸ ì „ë¬¸ê³¼ì •</div>
                </button>
                <button class="course-btn" onclick="issueTicket('C', 'ì˜ìƒí¸ì§‘ ê³¼ì • ìƒë‹´', 'í”„ë¦¬ë¯¸ì–´ í”„ë¡œ, ì• í”„í„° ì´í™íŠ¸')">
                    <div class="course-name">ì˜ìƒí¸ì§‘ ê³¼ì • ìƒë‹´</div>
                    <div class="course-description">í”„ë¦¬ë¯¸ì–´ í”„ë¡œ, ì• í”„í„° ì´í™íŠ¸ ì˜ìƒì œì‘</div>
                </button>
            </div>
        </div>
    </div>

    <div class="settings-panel" id="settingsPanel">
        <div class="settings-header">
            COM í¬íŠ¸ í”„ë¦°í„° ì„¤ì •
            <button style="float: right; background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer;" onclick="toggleSettings()">Ã—</button>
        </div>
        <div class="settings-content">
            <!-- í”„ë¦°í„° ì—°ê²° ì„¤ì • -->
            <div class="setting-group">
                <label class="setting-label">ğŸ”Œ ì‹œë¦¬ì–¼ í¬íŠ¸ ì—°ê²°</label>
                <div class="warning-box">
                    <strong>âš ï¸ ì£¼ì˜ì‚¬í•­:</strong><br>
                    â€¢ Chrome 89+ ë²„ì „ í•„ìš”<br>
                    â€¢ HTTPS ë˜ëŠ” localhostì—ì„œë§Œ ë™ì‘<br>
                    â€¢ ì‚¬ìš©ìê°€ ì§ì ‘ í¬íŠ¸ë¥¼ ì„ íƒí•´ì•¼ í•¨
                </div>
                
                <div class="com-controls">
                    <button class="setting-btn" onclick="connectSerial()">ğŸ“¡ í¬íŠ¸ ì—°ê²°</button>
                    <button class="setting-btn danger" onclick="disconnectSerial()">ğŸ”Œ ì—°ê²° í•´ì œ</button>
                    <button class="setting-btn" onclick="testPrint()">ğŸ–¨ï¸ í…ŒìŠ¤íŠ¸ ì¶œë ¥</button>
                </div>
                
                <div>
                    <label>í†µì‹  ì†ë„ (Baud Rate):</label>
                    <select class="com-select" id="baudRate">
                        <option value="9600">9600</option>
                        <option value="19200">19200</option>
                        <option value="38400">38400</option>
                        <option value="57600">57600</option>
                        <option value="115200" selected>115200</option>
                    </select>
                </div>
                
                <div id="serialMessage"></div>
            </div>

            <!-- í•œê¸€ ì¶œë ¥ ì„¤ì • -->
            <div class="setting-group">
                <label class="setting-label">ğŸ‡°ğŸ‡· í•œê¸€ ì¶œë ¥ ì„¤ì •</label>
                <div class="warning-box">
                    <strong>âš ï¸ í•œê¸€ í°íŠ¸ ë¬¸ì œ í•´ê²°:</strong><br>
                    â€¢ ëŒ€ë¶€ë¶„ì˜ ì˜ìˆ˜ì¦ í”„ë¦°í„°ëŠ” í•œê¸€ ì§€ì›ì´ ì œí•œì ì…ë‹ˆë‹¤<br>
                    â€¢ í°íŠ¸ê°€ ê¹¨ì§ˆ ê²½ìš° ì˜ë¬¸ ëª¨ë“œë¥¼ ì‚¬ìš©í•˜ì„¸ìš”<br>
                    â€¢ í”„ë¦°í„° íŒì›¨ì–´ì—ì„œ í•œê¸€ í°íŠ¸ ì§€ì› ì—¬ë¶€ë¥¼ í™•ì¸í•˜ì„¸ìš”
                </div>
                
                <div class="checkbox-container">
                    <input type="checkbox" id="koreanMode" checked onchange="updateKoreanMode()">
                    <label for="koreanMode">í•œê¸€ ì¶œë ¥ ëª¨ë“œ (í°íŠ¸ ê¹¨ì§ ì‹œ í•´ì œ)</label>
                </div>
                
                <div class="checkbox-container">
                    <input type="checkbox" id="eucKrMode" onchange="updateKoreanMode()">
                    <label for="eucKrMode">EUC-KR ì¸ì½”ë”© ì‚¬ìš© (êµ¬í˜• í”„ë¦°í„°ìš©)</label>
                </div>
                
                <div style="margin-top: 15px;">
                    <label>í•œê¸€ ë¬¸ìì…‹ ì„¤ì •:</label>
                    <select class="com-select" id="charsetMode">
                        <option value="utf8">UTF-8 (ê¸°ë³¸)</option>
                        <option value="euckr">EUC-KR (í•œê¸€ í”„ë¦°í„°)</option>
                        <option value="ascii">ASCII ì „ìš© (ì˜ë¬¸ë§Œ)</option>
                    </select>
                </div>
                
                <button class="setting-btn" onclick="testKoreanPrint()">í•œê¸€ ì¶œë ¥ í…ŒìŠ¤íŠ¸</button>
                <div id="koreanMessage"></div>
            </div>

            <!-- ESC/POS ëª…ë ¹ì–´ ì„¤ì • -->
            <div class="setting-group">
                <label class="setting-label">ğŸ“ ESC/POS í”„ë¦°í„° ëª…ë ¹ì–´</label>
                <div class="info-box">
                    í”„ë¦°í„°ë³„ í•œê¸€ ì§€ì› ëª…ë ¹ì–´ê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                    ë§¤ë‰´ì–¼ì„ ì°¸ê³ í•˜ì—¬ ì„¤ì •ì„ ì¡°ì •í•˜ì„¸ìš”.
                </div>
                
                <label>í•œê¸€ ëª¨ë“œ í™œì„±í™”:</label>
                <input type="text" class="setting-input" id="koreanCommand" value="1C2600" placeholder="HEX ì½”ë“œ">
                
                <label>ë¬¸ìì…‹ ì„¤ì •:</label>
                <input type="text" class="setting-input" id="charsetCommand" value="1B7400" placeholder="HEX ì½”ë“œ">
                
                <label>ìš©ì§€ ìë¥´ê¸° ëª…ë ¹ì–´:</label>
                <input type="text" class="setting-input" id="cutCommand" value="1D564200" placeholder="HEX ì½”ë“œ">
                
                <label>í°íŠ¸ í¬ê¸° ì„¤ì •:</label>
                <input type="text" class="setting-input" id="fontCommand" value="1D2100" placeholder="HEX ì½”ë“œ">
                
                <label>ì •ë ¬ ì„¤ì • (ê°€ìš´ë°):</label>
                <input type="text" class="setting-input" id="alignCommand" value="1B6101" placeholder="HEX ì½”ë“œ">
                
                <button class="setting-btn" onclick="saveEscPosSettings()">ì„¤ì • ì €ì¥</button>
            </div>

            <!-- ëŒ€ì•ˆ ë°©ë²•ë“¤ -->
            <div class="setting-group">
                <label class="setting-label">ğŸ”§ ëŒ€ì•ˆ ë°©ë²•ë“¤</label>
                
                <div style="margin-bottom: 15px;">
                    <strong>1. Electron ì•±ìœ¼ë¡œ ë³€í™˜</strong>
                    <div class="code-example">npm install electron
npm install serialport
// Node.js SerialPort ëª¨ë“ˆ ì‚¬ìš© ê°€ëŠ¥</div>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <strong>2. Node.js ë¡œì»¬ ì„œë²„</strong>
                    <div class="code-example">// server.js
const express = require('express');
const SerialPort = require('serialport');
const app = express();

app.post('/print', (req, res) => {
  const port = new SerialPort('COM1', { baudRate: 9600 });
  port.write(req.body.data);
});</div>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <strong>3. Chrome í™•ì¥ í”„ë¡œê·¸ë¨</strong>
                    <div class="code-example">// manifest.json
{
  "permissions": ["serial"],
  "background": {
    "scripts": ["background.js"]
  }
}</div>
                </div>
            </div>

            <!-- í”„ë¦°í„° í˜¸í™˜ì„± -->
            <div class="setting-group">
                <label class="setting-label">ğŸ–¨ï¸ ì§€ì› í”„ë¦°í„°</label>
                <div style="font-size: 0.9rem; line-height: 1.6; color: #666;">
                    <strong>í…ŒìŠ¤íŠ¸ëœ í”„ë¦°í„°:</strong><br>
                    â€¢ Epson TM-T20II, TM-T82II<br>
                    â€¢ Star TSP650II, TSP143III<br>
                    â€¢ Bixolon SRP-275III<br>
                    â€¢ Citizen CT-S310II<br><br>
                    
                    <strong>í•„ìš” ì¼€ì´ë¸”:</strong><br>
                    â€¢ USB to Serial (RS232) ì–´ëŒ‘í„°<br>
                    â€¢ ë˜ëŠ” Ethernet í”„ë¦°í„° ì„œë²„
                </div>
            </div>
        </div>
    </div>

    <script>
        let serialPort = null;
        let writer = null;
        let reader = null;
        let currentNumbers = { A: 0, B: 0, C: 0 };
        let escPosSettings = {
            cut: '1D564200',
            font: '1D2100',
            align: '1B6101'
        };

        // ì‹œê°„ ì—…ë°ì´íŠ¸
        function updateTime() {
            const now = new Date();
            document.getElementById('currentTime').textContent = now.toLocaleTimeString('ko-KR');
            
            const hour = now.getHours();
            let period = '';
            if (hour >= 9 && hour < 12) period = 'ì˜¤ì „ ìƒë‹´ ì‹œê°„ (09:00-12:00)';
            else if (hour >= 12 && hour < 15) period = 'ì ì‹¬ ìƒë‹´ ì‹œê°„ (12:00-15:00)';
            else if (hour >= 15 && hour < 18) period = 'ì˜¤í›„ ìƒë‹´ ì‹œê°„ (15:00-18:00)';
            else period = 'ìƒë‹´ ì‹œê°„ ì™¸';
            
            document.getElementById('currentPeriod').textContent = period;
        }

        // Web Serial API ì§€ì› í™•ì¸
        function checkSerialSupport() {
            if ('serial' in navigator) {
                console.log('Web Serial API ì§€ì›ë¨');
                return true;
            } else {
                console.log('Web Serial API ë¯¸ì§€ì›');
                updatePrinterStatus('disconnected', 'Web Serial API ë¯¸ì§€ì›');
                return false;
            }
        }

        // ì‹œë¦¬ì–¼ í¬íŠ¸ ì—°ê²°
        async function connectSerial() {
            if (!checkSerialSupport()) {
                alert('ì´ ë¸Œë¼ìš°ì €ëŠ” Web Serial APIë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\nChrome 89+ ë²„ì „ì„ ì‚¬ìš©í•˜ì„¸ìš”.');
                return;
            }

            try {
                updatePrinterStatus('connecting', 'í¬íŠ¸ ì—°ê²° ì¤‘...');
                
                const baudRate = parseInt(document.getElementById('baudRate').value);
                
                // ì‚¬ìš©ìê°€ í¬íŠ¸ ì„ íƒ
                serialPort = await navigator.serial.requestPort();
                
                // í¬íŠ¸ ì—´ê¸°
                await serialPort.open({ 
                    baudRate: baudRate,
                    dataBits: 8,
                    stopBits: 1,
                    parity: 'none'
                });

                // Writerì™€ Reader ì„¤ì •
                writer = serialPort.writable.getWriter();
                reader = serialPort.readable.getReader();

                updatePrinterStatus('connected', `COM í¬íŠ¸ ì—°ê²°ë¨ (${baudRate} baud)`);
                
                // ì—°ê²° í™•ì¸ì„ ìœ„í•œ í…ŒìŠ¤íŠ¸ ë°ì´í„° ì „ì†¡
                await sendTestData();
                
                const message = document.getElementById('serialMessage');
                message.innerHTML = '<div style="color: #27ae60; padding: 10px; background: #d4edda; border-radius: 5px;">âœ… í”„ë¦°í„° ì—°ê²° ì„±ê³µ!</div>';

            } catch (error) {
                console.error('ì‹œë¦¬ì–¼ ì—°ê²° ì˜¤ë¥˜:', error);
                updatePrinterStatus('disconnected', 'ì—°ê²° ì‹¤íŒ¨');
                
                const message = document.getElementById('serialMessage');
                message.innerHTML = `<div style="color: #721c24; padding: 10px; background: #f8d7da; border-radius: 5px;">âŒ ì—°ê²° ì‹¤íŒ¨: ${error.message}</div>`;
            }
        }

        // ì‹œë¦¬ì–¼ í¬íŠ¸ ì—°ê²° í•´ì œ
        async function disconnectSerial() {
            try {
                if (writer) {
                    await writer.close();
                    writer = null;
                }
                if (reader) {
                    await reader.cancel();
                    reader = null;
                }
                if (serialPort) {
                    await serialPort.close();
                    serialPort = null;
                }
                
                updatePrinterStatus('disconnected', 'í”„ë¦°í„° ë¯¸ì—°ê²°');
                
                const message = document.getElementById('serialMessage');
                message.innerHTML = '<div style="color: #666; padding: 10px; background: #e9ecef; border-radius: 5px;">ğŸ”Œ ì—°ê²°ì´ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤.</div>';
                
            } catch (error) {
                console.error('ì—°ê²° í•´ì œ ì˜¤ë¥˜:', error);
            }
        }

        // í”„ë¦°í„° ìƒíƒœ ì—…ë°ì´íŠ¸
        function updatePrinterStatus(status, message) {
            const statusEl = document.getElementById('printerStatus');
            const indicator = statusEl.querySelector('.status-indicator');
            
            statusEl.className = `printer-status ${status}`;
            indicator.className = `status-indicator ${status}`;
            statusEl.innerHTML = `<span class="status-indicator ${status}"></span>${message}`;
        }

        // HEX ë¬¸ìì—´ì„ Uint8Arrayë¡œ ë³€í™˜
        function hexToBytes(hex) {
            const bytes = [];
            for (let i = 0; i < hex.length; i += 2) {
                bytes.push(parseInt(hex.substr(i, 2), 16));
            }
            return new Uint8Array(bytes);
        }

        // í•œê¸€ í…ìŠ¤íŠ¸ë¥¼ EUC-KRë¡œ ì¸ì½”ë”© (ì˜ìˆ˜ì¦ í”„ë¦°í„°ìš©)
        function textToBytes(text) {
            // í•œê¸€ì´ í¬í•¨ëœ ê²½ìš° EUC-KR ì¸ì½”ë”© ì‹œë„
            if (/[ã„±-ã…|ã…-ã…£|ê°€-í£]/.test(text)) {
                return encodeToEucKr(text);
            }
            // ì˜ë¬¸/ìˆ«ìëŠ” ASCIIë¡œ ì²˜ë¦¬
            return new TextEncoder().encode(text);
        }

        // EUC-KR ì¸ì½”ë”© í•¨ìˆ˜ (í•œê¸€ í”„ë¦°í„°ìš©)
        function encodeToEucKr(text) {
            const eucKrMap = {
                // ìì£¼ ì‚¬ìš©ë˜ëŠ” í•œê¸€ ë¬¸ìë“¤ì˜ EUC-KR ì½”ë“œ
                'ê°€': [0xB0, 0xA1], 'ë‚˜': [0xB3, 0xAA], 'ë‹¤': [0xB4, 0xD9], 'ë¼': [0xB6, 0xF3], 'ë§ˆ': [0xB8, 0xB6],
                'ë°”': [0xB9, 0xD9], 'ì‚¬': [0xBB, 0xE7], 'ì•„': [0xBE, 0xC6], 'ì': [0xC0, 0xDA], 'ì°¨': [0xC2, 0xF7],
                'ì¹´': [0xC4, 0xAB], 'íƒ€': [0xC5, 0xB8], 'íŒŒ': [0xC6, 0xC4], 'í•˜': [0xC7, 0xCF],
                
                // ë°›ì¹¨ ìˆëŠ” ê¸€ìë“¤
                'ê°•': [0xB0, 0xAD], 'ë‚¨': [0xB3, 0xB2], 'ë‹¹': [0xB4, 0xE7], 'ë§': [0xB8, 0xBB], 'ë°©': [0xB9, 0xE6],
                'ìƒ': [0xBB, 0xF3], 'ì•ˆ': [0xBE, 0xC8], 'ì¥': [0xC0, 0xE5], 'ì²œ': [0xC3, 0xB5], 'í•™': [0xC7, 0xD0],
                
                // êµìœ¡ ê´€ë ¨ ë‹¨ì–´ë“¤
                'ê³¼': [0xB0, 0xFA], 'ì •': [0xC1, 0xA4], 'ìƒ': [0xBB, 0xF3], 'ë‹´': [0xB4, 0xE3], 'êµ': [0xB1, 0xB3],
                'ìœ¡': [0xC0, 0xBB], 'ì›': [0xBF, 0xF8], 'ìˆ˜': [0xBC, 0xF6], 'ê°•': [0xB0, 0xAD], 'ë¬¸': [0xB9, 0xAE],
                'ì˜': [0xC0, 0xC7], 'ì ‘': [0xC1, 0xA2], 'ë²ˆ': [0xB9, 0xF8], 'í˜¸': [0xC8, 0xA3], 'í‘œ': [0xC7, 0xA5],
                
                // ì»´í“¨í„° ê´€ë ¨
                'ì›Œ': [0xBF, 0xF6], 'ë“œ': [0xB5, 0xE5], 'ì—‘': [0xBF, 0xA4], 'ì…€': [0xBC, 0xBF], 'íŒŒ': [0xC6, 0xC4],
                'ì›Œ': [0xBF, 0xF6], 'í¬': [0xC6, 0xF7], 'ì¸': [0xC0, 0xCE], 'íŠ¸': [0xC6, 0xAE], 'ìƒµ': [0xBE, 0xF0],
                'í† ': [0xC5, 0xE4], 'ì¼': [0xC0, 0xCF], 'ëŸ¬': [0xB7, 0xAF], 'ìŠ¤': [0xBD, 0xBA], 'ë””': [0xB5, 0xF0],
                'ì': [0xC0, 0xDA], 'ì¸': [0xC0, 0xCE], 'ì˜': [0xBF, 0xB5], 'ìƒ': [0xBB, 0xF3], 'í¸': [0xC6, 0xED],
                'ì§‘': [0xC1, 0xFD], 'í”„': [0xC7, 0xC1], 'ë¦¬': [0xB8, 0xAE], 'ë¯¸': [0xB9, 0xCC], 'ì–´': [0xBE, 0xEE],
                'í”„': [0xC7, 0xC1], 'ë¡œ': [0xB7, 0xCE], 'ì• ': [0xBE, 0xD6], 'í”„': [0xC7, 0xC1], 'í„°': [0xC5, 0xCD],
                'ì´': [0xC0, 0xCC], 'í™': [0xC6, 0xF0], 'íŠ¸': [0xC6, 0xAE], 'ì œ': [0xC1, 0xA6], 'ì‘': [0xC0, 0xDB],
                
                // ê¸°íƒ€ ìì£¼ ì‚¬ìš©ë˜ëŠ” ê¸€ìë“¤
                'ê¸°': [0xB1, 0xE2], 'ì´ˆ': [0xC3, 0xCA], 'ë¶€': [0xBA, 0xCE], 'í„°': [0xC5, 0xCD], 'ì‹¤': [0xBD, 0xC7],
                'ë¬´': [0xB9, 0xAB], 'ê¹Œ': [0xB1, 0xEE], 'ì§€': [0xC1, 0xF6], 'ì „': [0xC0, 0xFC], 'ë¬¸': [0xB9, 0xAE],
                'ìˆœ': [0xBC, 0xF8], 'ì„œ': [0xBC, 0xAD], 'ë˜': [0xB5, 0xC7], 'ë©´': [0xB8, 0xE9], 'ì•ˆ': [0xBE, 0xC8],
                'ë‚´': [0xB3, 0xBB], 'í•´': [0xC7, 0xD8], 'ë“œ': [0xB5, 0xE5], 'ë¦½': [0xB8, 0xB3], 'ë‹ˆ': [0xB4, 0xCF],
                'ë‹¤': [0xB4, 0xD9], 'ì´': [0xC0, 0xCC], 'ë²ˆ': [0xB9, 0xF8], 'ë¥¼': [0xB8, 0xA6], 'ì˜': [0xC0, 0xE2],
                'ë³´': [0xBA, 0xB8], 'ê´€': [0xB0, 0xFC], 'ì£¼': [0xC1, 0xD6], 'ì„¸': [0xBC, 0xBC], 'ìš”': [0xBF, 0xE4],
                'ì‹¤': [0xBD, 0xC7], 'ì ‘': [0xC1, 0xA2], 'ìˆ˜': [0xBC, 0xF6], 'ì‹œ': [0xBD, 0xC3], 'ê°„': [0xB0, 0xA3],
                'ì™„': [0xBF, 0xCF], 'ë£Œ': [0xB7, 0xE1], 'ë°›': [0xB9, 0xDE], 'ì•„': [0xBE, 0xC6], 'ê°€': [0xB0, 0xA1],
                
                // ìˆ«ìì™€ íŠ¹ìˆ˜ë¬¸ìëŠ” ASCII ê·¸ëŒ€ë¡œ
                '0': [0x30], '1': [0x31], '2': [0x32], '3': [0x33], '4': [0x34],
                '5': [0x35], '6': [0x36], '7': [0x37], '8': [0x38], '9': [0x39],
                ':': [0x3A], '-': [0x2D], ' ': [0x20], '\n': [0x0A], '(': [0x28],
                ')': [0x29], '*': [0x2A], '=': [0x3D], 'â”': [0xA6, 0xA6], 'â”€': [0xA6, 0xA6]
            };
            
            const result = [];
            for (let i = 0; i < text.length; i++) {
                const char = text[i];
                if (eucKrMap[char]) {
                    result.push(...eucKrMap[char]);
                } else {
                    // ë§¤í•‘ë˜ì§€ ì•Šì€ ë¬¸ìëŠ” ASCIIë¡œ ì²˜ë¦¬í•˜ê±°ë‚˜ ?ë¡œ ëŒ€ì²´
                    const code = char.charCodeAt(0);
                    if (code < 128) {
                        result.push(code);
                    } else {
                        result.push(0x3F); // ? ë¬¸ì
                    }
                }
            }
            return new Uint8Array(result);
        }

        // ì˜ë¬¸ìœ¼ë¡œ ë²ˆí˜¸í‘œ ì¶œë ¥ (í°íŠ¸ ê¹¨ì§ ë°©ì§€ìš©)
        function generateEnglishTicket(info) {
            const courseMap = {
                'OA ê³¼ì • ìƒë‹´': 'OA Course Consultation',
                'ë””ìì¸ ê³¼ì • ìƒë‹´': 'Design Course Consultation', 
                'ì˜ìƒí¸ì§‘ ê³¼ì • ìƒë‹´': 'Video Editing Course',
                'ì›Œë“œ, ì—‘ì…€, íŒŒì›Œí¬ì¸íŠ¸': 'Word, Excel, PowerPoint',
                'í¬í† ìƒµ, ì¼ëŸ¬ìŠ¤íŠ¸': 'Photoshop, Illustrator',
                'í”„ë¦¬ë¯¸ì–´ í”„ë¡œ, ì• í”„í„° ì´í™íŠ¸': 'Premiere Pro, After Effects'
            };
            
            return {
                ...info,
                course: courseMap[info.course] || info.course,
                description: courseMap[info.description] || info.description
            };
        }

        // í…ŒìŠ¤íŠ¸ ë°ì´í„° ì „ì†¡
        async function sendTestData() {
            if (!writer) return;
            
            try {
                // ESC/POS ì´ˆê¸°í™” ëª…ë ¹
                await writer.write(hexToBytes('1B40')); // ESC @
                
                // ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€
                await writer.write(textToBytes('ì—°ê²° í…ŒìŠ¤íŠ¸\n\n'));
                
                // ìš©ì§€ ìë¥´ê¸°
                if (escPosSettings.cut) {
                    await writer.write(hexToBytes(escPosSettings.cut));
                }
                
            } catch (error) {
                console.error('í…ŒìŠ¤íŠ¸ ë°ì´í„° ì „ì†¡ ì˜¤ë¥˜:', error);
            }
        }

        // ë²ˆí˜¸í‘œ ë°œê¸‰
        async function issueTicket(code, courseName, description) {
            if (!serialPort || !writer) {
                alert('í”„ë¦°í„°ê°€ ì—°ê²°ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\nì„¤ì •ì—ì„œ í¬íŠ¸ë¥¼ ì—°ê²°í•´ì£¼ì„¸ìš”.');
                return;
            }

            currentNumbers[code]++;
            const number = code + String(currentNumbers[code]).padStart(3, '0');
            const now = new Date();
            
            try {
                await printTicket({
                    number: number,
                    course: courseName,
                    description: description,
                    time: now.toLocaleString('ko-KR'),
                    date: now.toLocaleDateString('ko-KR'),
                    timeOnly: now.toLocaleTimeString('ko-KR')
                });
                
                showPrintSuccess(number);
                
            } catch (error) {
                console.error('ì¶œë ¥ ì˜¤ë¥˜:', error);
                alert('ì¶œë ¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        }

        // ì‹¤ì œ í”„ë¦°í„°ë¡œ ë²ˆí˜¸í‘œ ì¶œë ¥ (í•œê¸€ í°íŠ¸ ê°œì„ )
        async function printTicket(info) {
            if (!writer) throw new Error('í”„ë¦°í„°ê°€ ì—°ê²°ë˜ì§€ ì•ŠìŒ');

            try {
                // ì¶œë ¥ ëª¨ë“œ í™•ì¸
                const koreanMode = document.getElementById('koreanMode')?.checked ?? true;
                const printInfo = koreanMode ? info : generateEnglishTicket(info);
                
                // 1. í”„ë¦°í„° ì´ˆê¸°í™”
                await writer.write(hexToBytes('1B40')); // ESC @
                
                // 2. í•œê¸€ ì§€ì› ì„¤ì • (KS X 1001 ë¬¸ìì…‹)
                if (koreanMode) {
                    await writer.write(hexToBytes('1C2600')); // FS & (í•œê¸€ ëª¨ë“œ)
                    await writer.write(hexToBytes('1B7400')); // ESC t 0 (í•œê¸€ ë¬¸ìí‘œ)
                }
                
                // 3. ê°€ìš´ë° ì •ë ¬
                await writer.write(hexToBytes('1B6101')); // ESC a 1
                
                // 4. í—¤ë” (ì˜ë¬¸ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ)
                await writer.write(new TextEncoder().encode('COURSE CONSULTATION TICKET\n'));
                await writer.write(new TextEncoder().encode('==========================\n\n'));
                
                // 5. ë²ˆí˜¸ (í¬ê²Œ)
                await writer.write(hexToBytes('1D2122')); // 3ë°° í¬ê¸°
                await writer.write(new TextEncoder().encode(`${printInfo.number}\n\n`));
                
                // 6. ì¼ë°˜ í¬ê¸°ë¡œ ë³µì›
                await writer.write(hexToBytes('1D2100')); // ì¼ë°˜ í¬ê¸°
                
                // 7. ê³¼ì • ì •ë³´
                if (koreanMode) {
                    await writer.write(textToBytes(`${printInfo.course}\n`));
                    await writer.write(textToBytes(`${printInfo.description}\n\n`));
                } else {
                    await writer.write(new TextEncoder().encode(`${printInfo.course}\n`));
                    await writer.write(new TextEncoder().encode(`${printInfo.description}\n\n`));
                }
                
                // 8. ë°”ì½”ë“œ ìŠ¤íƒ€ì¼
                await writer.write(new TextEncoder().encode(`* ${printInfo.number} *\n\n`));
                
                // 9. ì‹œê°„ ì •ë³´ (ì˜ë¬¸)
                await writer.write(new TextEncoder().encode(`Time: ${printInfo.timeOnly}\n`));
                await writer.write(new TextEncoder().encode(`Date: ${printInfo.date}\n`));
                await writer.write(new TextEncoder().encode(`No.: ${printInfo.number}\n\n`));
                
                // 10. í‘¸í„° (ì˜ë¬¸)
                await writer.write(new TextEncoder().encode('-------------------------\n'));
                await writer.write(new TextEncoder().encode('Please wait for your turn\n'));
                await writer.write(new TextEncoder().encode('Keep this ticket safely\n'));
                await writer.write(new TextEncoder().encode('-------------------------\n'));
                await writer.write(new TextEncoder().encode('Education Center\n\n\n'));
                
                // 11. ìš©ì§€ ìë¥´ê¸°
                if (escPosSettings.cut) {
                    await writer.write(hexToBytes(escPosSettings.cut));
                }
                
                console.log('ë²ˆí˜¸í‘œ ì¶œë ¥ ì™„ë£Œ:', printInfo.number);
                
            } catch (error) {
                console.error('í”„ë¦°í„° ì¶œë ¥ ì˜¤ë¥˜:', error);
                throw error;
            }
        }

        // í…ŒìŠ¤íŠ¸ ì¶œë ¥
        async function testPrint() {
            await issueTicket('T', 'í…ŒìŠ¤íŠ¸ ì¶œë ¥', 'í”„ë¦°í„° ì—°ê²° ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤');
        }

        // ì¶œë ¥ ì„±ê³µ ë©”ì‹œì§€
        function showPrintSuccess(number) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'print-success';
            messageDiv.innerHTML = `
                <div style="font-size: 4rem; margin-bottom: 15px;">ğŸ«</div>
                <div style="font-size: 3rem; margin-bottom: 10px;">${number}</div>
                <div style="font-size: 1.3rem; opacity: 0.9;">ì¶œë ¥ ì™„ë£Œ!</div>
                <div style="font-size: 1rem; margin-top: 10px; opacity: 0.8;">ë²ˆí˜¸í‘œë¥¼ ë°›ì•„ê°€ì„¸ìš”</div>
            `;
            
            document.body.appendChild(messageDiv);
            
            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.remove();
                }
            }, 3000);
        }

        // í•œê¸€ ëª¨ë“œ ì—…ë°ì´íŠ¸
        function updateKoreanMode() {
            const koreanMode = document.getElementById('koreanMode').checked;
            const eucKrMode = document.getElementById('eucKrMode').checked;
            const charsetMode = document.getElementById('charsetMode').value;
            
            localStorage.setItem('koreanSettings', JSON.stringify({
                korean: koreanMode,
                eucKr: eucKrMode,
                charset: charsetMode
            }));
            
            const message = document.getElementById('koreanMessage');
            if (koreanMode) {
                message.innerHTML = '<div style="color: #27ae60; padding: 10px; background: #d4edda; border-radius: 5px;">âœ… í•œê¸€ ì¶œë ¥ ëª¨ë“œê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.</div>';
            } else {
                message.innerHTML = '<div style="color: #856404; padding: 10px; background: #fff3cd; border-radius: 5px;">âš ï¸ ì˜ë¬¸ ì¶œë ¥ ëª¨ë“œë¡œ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤.</div>';
            }
        }

        // í•œê¸€ ì¶œë ¥ í…ŒìŠ¤íŠ¸
        async function testKoreanPrint() {
            if (!serialPort || !writer) {
                alert('í”„ë¦°í„°ê°€ ì—°ê²°ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }

            const koreanMode = document.getElementById('koreanMode').checked;
            
            try {
                // í”„ë¦°í„° ì´ˆê¸°í™”
                await writer.write(hexToBytes('1B40')); // ESC @
                
                if (koreanMode) {
                    // í•œê¸€ ëª¨ë“œ ì„¤ì •
                    const koreanCmd = document.getElementById('koreanCommand').value;
                    const charsetCmd = document.getElementById('charsetCommand').value;
                    
                    if (koreanCmd) await writer.write(hexToBytes(koreanCmd));
                    if (charsetCmd) await writer.write(hexToBytes(charsetCmd));
                    
                    // ê°€ìš´ë° ì •ë ¬
                    await writer.write(hexToBytes('1B6101'));
                    
                    // í•œê¸€ í…ŒìŠ¤íŠ¸
                    await writer.write(textToBytes('=== í•œê¸€ í…ŒìŠ¤íŠ¸ ===\n'));
                    await writer.write(textToBytes('ê°€ë‚˜ë‹¤ë¼ë§ˆë°”ì‚¬\n'));
                    await writer.write(textToBytes('ì•„ìì°¨ì¹´íƒ€íŒŒí•˜\n'));
                    await writer.write(textToBytes('ìˆ˜ê°•ë¬¸ì˜ ì ‘ìˆ˜\n'));
                    await writer.write(textToBytes('OA ê³¼ì • ìƒë‹´\n'));
                    await writer.write(textToBytes('ë””ìì¸ ê³¼ì • ìƒë‹´\n\n'));
                } else {
                    // ì˜ë¬¸ ëª¨ë“œ í…ŒìŠ¤íŠ¸
                    await writer.write(hexToBytes('1B6101'));
                    await writer.write(new TextEncoder().encode('=== English Test ===\n'));
                    await writer.write(new TextEncoder().encode('ABCDEFGHIJKLMNOP\n'));
                    await writer.write(new TextEncoder().encode('Course Consultation\n'));
                    await writer.write(new TextEncoder().encode('OA Course\n'));
                    await writer.write(new TextEncoder().encode('Design Course\n\n'));
                }
                
                // ìš©ì§€ ìë¥´ê¸°
                const cutCmd = document.getElementById('cutCommand').value;
                if (cutCmd) {
                    await writer.write(hexToBytes(cutCmd));
                }
                
                const message = document.getElementById('koreanMessage');
                message.innerHTML = '<div style="color: #27ae60; padding: 10px; background: #d4edda; border-radius: 5px;">âœ… í…ŒìŠ¤íŠ¸ ì¶œë ¥ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. í°íŠ¸ ìƒíƒœë¥¼ í™•ì¸í•˜ì„¸ìš”.</div>';
                
            } catch (error) {
                console.error('í•œê¸€ í…ŒìŠ¤íŠ¸ ì¶œë ¥ ì˜¤ë¥˜:', error);
                const message = document.getElementById('koreanMessage');
                message.innerHTML = '<div style="color: #721c24; padding: 10px; background: #f8d7da; border-radius: 5px;">âŒ í…ŒìŠ¤íŠ¸ ì¶œë ¥ ì‹¤íŒ¨: ' + error.message + '</div>';
            }
        }

        // ESC/POS ì„¤ì • ì €ì¥ (í™•ì¥)
        function saveEscPosSettings() {
            escPosSettings = {
                cut: document.getElementById('cutCommand').value,
                font: document.getElementById('fontCommand').value,
                align: document.getElementById('alignCommand').value,
                korean: document.getElementById('koreanCommand').value,
                charset: document.getElementById('charsetCommand').value
            };
            
            localStorage.setItem('escPosSettings', JSON.stringify(escPosSettings));
            
            alert('ESC/POS ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ì„¤ì • íŒ¨ë„ í† ê¸€
        function toggleSettings() {
            const panel = document.getElementById('settingsPanel');
            panel.classList.toggle('open');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        function initialize() {
            // ì €ì¥ëœ ESC/POS ì„¤ì • ë¡œë“œ
            const saved = localStorage.getItem('escPosSettings');
            if (saved) {
                try {
                    escPosSettings = { ...escPosSettings, ...JSON.parse(saved) };
                    document.getElementById('cutCommand').value = escPosSettings.cut || '1D564200';
                    document.getElementById('fontCommand').value = escPosSettings.font || '1D2100';
                    document.getElementById('alignCommand').value = escPosSettings.align || '1B6101';
                    document.getElementById('koreanCommand').value = escPosSettings.korean || '1C2600';
                    document.getElementById('charsetCommand').value = escPosSettings.charset || '1B7400';
                } catch (e) {
                    console.log('ESC/POS ì„¤ì • ë¡œë“œ ì‹¤íŒ¨');
                }
            }

            // ì €ì¥ëœ í•œê¸€ ì„¤ì • ë¡œë“œ
            const savedKorean = localStorage.getItem('koreanSettings');
            if (savedKorean) {
                try {
                    const koreanSettings = JSON.parse(savedKorean);
                    document.getElementById('koreanMode').checked = koreanSettings.korean ?? true;
                    document.getElementById('eucKrMode').checked = koreanSettings.eucKr ?? false;
                    document.getElementById('charsetMode').value = koreanSettings.charset || 'utf8';
                } catch (e) {
                    console.log('í•œê¸€ ì„¤ì • ë¡œë“œ ì‹¤íŒ¨');
                }
            }
            
            updateTime();
            setInterval(updateTime, 1000);
            
            checkSerialSupport();
        }

            <!-- í”„ë¦°í„°ë³„ í•œê¸€ ì„¤ì • ê°€ì´ë“œ -->
            <div class="setting-group">
                <label class="setting-label">ğŸ“– í”„ë¦°í„°ë³„ í•œê¸€ ì„¤ì • ê°€ì´ë“œ</label>
                
                <div style="margin-bottom: 15px;">
                    <strong>ğŸ–¨ï¸ Epson TM ì‹œë¦¬ì¦ˆ:</strong>
                    <div class="code-example">í•œê¸€ ëª¨ë“œ: 1C2600
ë¬¸ìì…‹: 1B7416  (KS X 1001)
ì´ˆê¸°í™”: 1B40</div>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <strong>ğŸ–¨ï¸ Star TSP ì‹œë¦¬ì¦ˆ:</strong>
                    <div class="code-example">í•œê¸€ ëª¨ë“œ: 1B1D4B53
ë¬¸ìì…‹: 1B7410
ì½”ë“œí˜ì´ì§€: 1B742A</div>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <strong>ğŸ–¨ï¸ Bixolon SRP ì‹œë¦¬ì¦ˆ:</strong>
                    <div class="code-example">í•œê¸€ ëª¨ë“œ: 1C2600
ë¬¸ìì…‹: 1B7413
ì´ˆê¸°í™”: 1B40</div>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <strong>ğŸ–¨ï¸ Citizen CT ì‹œë¦¬ì¦ˆ:</strong>
                    <div class="code-example">í•œê¸€ ëª¨ë“œ: 1C2600
ë¬¸ìì…‹: 1B7400
ì¸ì½”ë”©: EUC-KR</div>
                </div>
                
                <div class="warning-box">
                    <strong>ğŸ’¡ íŒ:</strong><br>
                    â€¢ í•œê¸€ì´ ê¹¨ì§€ë©´ "ì˜ë¬¸ ëª¨ë“œ"ë¡œ ì „í™˜í•˜ì„¸ìš”<br>
                    â€¢ í”„ë¦°í„° ë§¤ë‰´ì–¼ì—ì„œ í•œê¸€ ì§€ì› ì—¬ë¶€ë¥¼ í™•ì¸í•˜ì„¸ìš”<br>
                    â€¢ êµ¬í˜• í”„ë¦°í„°ëŠ” EUC-KR ì¸ì½”ë”©ì„ ì‚¬ìš©í•˜ì„¸ìš”<br>
                    â€¢ ìµœì‹  í”„ë¦°í„°ëŠ” UTF-8ì„ ì§€ì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
                </div>
            </div>

            <!-- ë¬¸ì œ í•´ê²° ê°€ì´ë“œ -->
            <div class="setting-group">
                <label class="setting-label">ğŸ”§ í•œê¸€ í°íŠ¸ ë¬¸ì œ í•´ê²°</label>
                
                <div style="font-size: 0.9rem; line-height: 1.6; color: #666;">
                    <strong>âŒ í•œê¸€ì´ â–¡â–¡â–¡ ë˜ëŠ” ???ë¡œ ë‚˜ì˜¬ ë•Œ:</strong><br>
                    1. "í•œê¸€ ì¶œë ¥ ëª¨ë“œ" ì²´í¬ í•´ì œ<br>
                    2. "ASCII ì „ìš©" ëª¨ë“œë¡œ ë³€ê²½<br>
                    3. í”„ë¦°í„° ë“œë¼ì´ë²„ì—ì„œ í•œê¸€ í°íŠ¸ ì„¤ì¹˜<br><br>
                    
                    <strong>âŒ í•œê¸€ì´ ê¹¨ì ¸ì„œ ë‚˜ì˜¬ ë•Œ:</strong><br>
                    1. "EUC-KR ì¸ì½”ë”© ì‚¬ìš©" ì²´í¬<br>
                    2. ë¬¸ìì…‹ì„ "euckr"ë¡œ ë³€ê²½<br>
                    3. í”„ë¦°í„°ë³„ í•œê¸€ ëª…ë ¹ì–´ í™•ì¸<br><br>
                    
                    <strong>âœ… ê¶Œì¥ í•´ê²°ì±…:</strong><br>
                    â€¢ ì˜ë¬¸ ëª¨ë“œ ì‚¬ìš© (ê°€ì¥ ì•ˆì •ì )<br>
                    â€¢ ë²ˆí˜¸ì™€ ì‹œê°„ë§Œ í•œê¸€, ë‚˜ë¨¸ì§€ëŠ” ì˜ë¬¸<br>
                    â€¢ í”„ë¦°í„° íŒì›¨ì–´ ì—…ë°ì´íŠ¸
                </div>
            </div>
        </div>
    </div>

    <script>
        let serialPort = null;
        let writer = null;
        let reader = null;
        let currentNumbers = { A: 0, B: 0, C: 0 };
        let escPosSettings = {
            cut: '1D564200',
            font: '1D2100',
            align: '1B6101',
            korean: '1C2600',
            charset: '1B7400'
        };saved) {
                try {
                    escPosSettings = { ...escPosSettings, ...JSON.parse(saved) };
                    document.getElementById('cutCommand').value = escPosSettings.cut;
                    document.getElementById('fontCommand').value = escPosSettings.font;
                    document.getElementById('alignCommand').value = escPosSettings.align;
                } catch (e) {
                    console.log('ì„¤ì • ë¡œë“œ ì‹¤íŒ¨');
                }
            }
            
            updateTime();
            setInterval(updateTime, 1000);
            
            checkSerialSupport();
        }

        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.altKey && e.key === 'c') {
                e.preventDefault();
                connectSerial();
            }
            if (e.key === 'Escape') {
                const panel = document.getElementById('settingsPanel');
                if (panel.classList.contains('open')) {
                    toggleSettings();
                }
            }
        });

        // í˜ì´ì§€ ì–¸ë¡œë“œ ì‹œ ì—°ê²° í•´ì œ
        window.addEventListener('beforeunload', function() {
            if (serialPort) {
                disconnectSerial();
            }
        });

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', initialize);
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initialize);
        } else {
            initialize();
        }
    </script>
</body>
</html>.key === 's') {
                e.preventDefault();
                toggleSettings();
            }
            if (e.ctrlKey && e.altKey && e.key === 'p') {
                e.preventDefault();
                testPrint();
            }
            if (e.ctrlKey && e.altKey && e
